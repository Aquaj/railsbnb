<h2>Show</h2>

<div class="flat">
  <p>Owner: <span><%= @flat.user.name %></span></p>
  <p>Address: <span><%= @flat.address %></span></p>
  <p>Description: <span><%= @flat.description %></span><p>
  <div class="content">
    <div id="map" style='width: 400px; height: 200px;'></div>
  </div>
</div>

<% content_for(:js) do %>
  <script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script>
  <script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script>
  <script>
  var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'map'} }, displayOnMap);
  handler.getMap().setZoom(14);

  function displayOnMap(position){
    var marker = handler.addMarker({
      lat: <%= @flat.latitude %>,
      lng: <%= @flat.longitude %>,
    });
    handler.map.centerOn(marker);
  };
  </script>
<% end %>
